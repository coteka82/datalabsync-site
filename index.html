<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DataLabSync | Field Execution Platform</title>

<!-- Keep ALL your existing meta tags + styles here -->
<!-- I am not repeating your entire CSS block to keep this readable -->
<!-- DO NOT delete your styles section -->

</head>
<body>

<!-- ========================= -->
<!-- HERO FORM (FIXED) -->
<!-- ========================= -->

<form class="hero-form" id="heroForm">
    <input type="email" name="email" placeholder="Enter your work email" required>
    <button type="submit">Request Early Access</button>
</form>
<div class="success-message" id="heroSuccess">
    <strong>You're on the list!</strong>
</div>


<!-- ========================= -->
<!-- CTA FORM (FIXED) -->
<!-- ========================= -->

<form class="cta-form" id="ctaForm">
    <input type="email" name="email" placeholder="Enter your work email" required>
    <button type="submit">Request Early Access</button>
</form>
<div class="success-message" id="ctaSuccess">
    <strong>You're on the list!</strong>
</div>


<!-- ========================= -->
<!-- CLEAN WORKING SCRIPT -->
<!-- ========================= -->

<script>
function isValidEmail(email) {
  const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return re.test(email);
}

async function submitToAPI(email) {
  try {
    const response = await fetch("https://clawbot-5b60.onrender.com/api/waitlist", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ email })
    });

    const data = await response.json();

    if (!response.ok) {
      throw new Error(data.error || "Submission failed");
    }

    return { success: true };
  } catch (error) {
    console.error("Submission error:", error);
    return { success: false };
  }
}

function attachFormHandler(formId, successId) {
  const form = document.getElementById(formId);
  const successMessage = document.getElementById(successId);

  if (!form) return;

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    const emailInput = form.querySelector('input[type="email"]');
    const submitBtn = form.querySelector("button");

    const email = emailInput.value.trim();

    if (!isValidEmail(email)) {
      alert("Please enter a valid email address.");
      return;
    }

    submitBtn.disabled = true;
    submitBtn.textContent = "Submitting...";

    const result = await submitToAPI(email);

    submitBtn.disabled = false;
    submitBtn.textContent = "Request Early Access";

    if (result.success) {
      successMessage.classList.add("show");
      form.reset();
    } else {
      alert("Something went wrong. Please try again.");
    }
  });
}

document.addEventListener("DOMContentLoaded", function () {
  attachFormHandler("heroForm", "heroSuccess");
  attachFormHandler("ctaForm", "ctaSuccess");
});
</script>


<!-- ========================= -->
<!-- KEEP YOUR SMOOTH SCROLL SCRIPT -->
<!-- ========================= -->

<script>
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  });
});
</script>

</body>
</html>
